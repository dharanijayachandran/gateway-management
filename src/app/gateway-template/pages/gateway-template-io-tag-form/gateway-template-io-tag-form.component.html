<div class="row">
  <div class="col-md-12">
    <h1 i18n="Page header|Add IO Tag@@addIOTag" class="page-header" *ngIf="IOTagFormView">
      Add IO Tag
    </h1>
    <h1 i18n="Page header|Add IO Tag Preview@@addIOTagPreview" class="page-header" *ngIf="IOTagReadModeView">
      Add IO Tag - Preview
    </h1>
  </div>
</div>

<div class="row margin_0px">
  <div class="col-md-12 padding_0px rowBox">
    <div class="padding_Form">
      <form [formGroup]="gatewayTemplateIOTagForm" novalidate (ngSubmit)="createIOTag()" *ngIf="IOTagFormView">
        <div class="form-group-custom1">
          <legend i18n="Header|Gateway Template IO Tag@@gatewayTemplateIOTag" class="m-b-15">Gateway Template IO Tag</legend>
          <div class="formBodyCustom1" id="gatewayTemplateIOTagDetails">
            <div class=" m-form__group row">
              <div class="col-lg-6">
                <label i18n='Name|Name@@name*' class="">Name<span class="text-danger"> *</span></label>
                <div class="form-group">
                  <div [ngClass]="{'has-error': ((gatewayTemplateIOTagForm.get('name').touched ||
                                    gatewayTemplateIOTagForm.get('name').dirty) &&
                                    gatewayTemplateIOTagForm.get('name').errors)}">
                    <input (keyup)="onKey($event)" type="text" id="gatewayTemplateIOTagName" formControlName="name" class="form-control m-input"
                      i18n-placeholder='IO Tag Name placeholder|Enter IO Tag Name@@gatewayTemplateIOTagName.placeholder' placeholder="Enter IO Tag Name">
                    <span class="help-block" *ngIf="((gatewayTemplateIOTagForm.get('name').touched ||
                                      gatewayTemplateIOTagForm.get('name').dirty) &&
                                       gatewayTemplateIOTagForm.get('name').errors)">
                      <span i18n="Message|Please Enter I/O Tag Name@@gatewayTemplateIOTagName.message"
                        *ngIf="gatewayTemplateIOTagForm.get('name').errors.required">
                        Please Enter I/O Tag Name
                      </span>
                      <span i18n="Message|Please enter valid Characters@@gatewayTemplateIOTagName.message2" *ngIf="gatewayTemplateIOTagForm.get('name').errors.pattern">
                        Please enter valid Characters
                      </span>
                    </span>
                    <span id="gatewayTemplateIOTagNameValMsg"></span>
                  </div>
                </div>
                <label i18n='Tag Key Name|Tag Key Name@@tagKeyName' class="">Tag Key Name</label>
                <div class="form-group">
                  <input type="text"  formControlName="tagKeyName" class="form-control m-input"
                    i18n-placeholder='Tag Key Name placeholder|Enter Tag Key Name@@tagKeyName.placeholder' placeholder="Enter Tag Key Name">
                </div>
              </div>
              <div class="col-lg-6">
                <label i18n="Description|Description@@description" class="">Description</label>
                <div class="form-group">
                  <textarea rows="3" id="gatewayTemplateIOTagDecsription" formControlName="description"
                    class="form-control m-input textAreaHeight" i18n-placeholder="Description placeholder|Enter Description@@description.placeholder"
                    placeholder="Enter Description"></textarea>
                  <span id="gatewayTemplateIOTagDecsriptionValMsg"></span>
                  <span id="gatewayTypeIdValMsg" class="errorMsg"></span>
                </div>
              </div>
            </div>
            <div class=" m-form__group row">
              <div class="col-lg-6">
                <label i18n='Tag Type|Tag Type@@tagType*' class="">Tag Type<span class="text-danger"> *</span></label>
                <div class="form-group">
                  <div [ngClass]="{'has-error': ((gatewayTemplateIOTagForm.get('tagType').touched ||
                                    gatewayTemplateIOTagForm.get('tagType').dirty) &&
                                    gatewayTemplateIOTagForm.get('tagType').errors)}">
                    <select id="tagType" formControlName="tagType" class="form-control m-input">
                      <option i18n="Option|Select@@select" [ngValue]=null>--Select--</option>
                      <option *ngFor="let tagType of tagTypes| orderByAlphabetical:'value'" [ngValue]="tagType.id">
                        {{tagType.value}}
                      </option>
                    </select>
                    <span class="help-block" *ngIf="((gatewayTemplateIOTagForm.get('tagType').touched ||
                                        gatewayTemplateIOTagForm.get('tagType').dirty) &&
                                        gatewayTemplateIOTagForm.get('tagType').errors)">
                      <span i18n="Message|Please Select Tag Type@@tagType.message" *ngIf="gatewayTemplateIOTagForm.get('tagType').errors.required">
                        Please Select Tag Type
                      </span>
                    </span>
                  </div>
                </div>
              </div>
              <div class="col-lg-6">
                <label i18n='Data Type|Data Type@@dataType*' class="">Data Type<span class="text-danger"> *</span></label>
                <div class="form-group">
                  <div [ngClass]="{'has-error': ((gatewayTemplateIOTagForm.get('dataTypeId').touched ||
                                    gatewayTemplateIOTagForm.get('dataTypeId').dirty) &&
                                    gatewayTemplateIOTagForm.get('dataTypeId').errors)}">
                                    <ejs-dropdownlist id='ddlelement' #ddlelement class="form-control p-0" [value]='dataTypeId'
                                    name="dataTypeId" formControlName="dataTypeId" [dataSource]='dataTypes'
                                    [placeholder]='dataTypeWaterMark' [fields]='dataTypeFields' [popupHeight]='height'
                                    [sortOrder]="sortDropDown" (filtering)='onFilteringDataType($event)'
                                    [filterBarPlaceholder]="filterPlaceholder" [allowFiltering]='true'
                                    (change)='dataTypeOnChange($event)' [locale]='locale'></ejs-dropdownlist>                
                    <!-- <select id="dataTypeId" formControlName="dataTypeId" class="form-control m-input">
                      <option i18n="Option|Select@@select" [ngValue]=null>--Select--</option>
                      <option *ngFor="let dataType of dataTypes" [ngValue]="dataType.id">
                        {{dataType.name}}
                      </option>
                    </select> -->
                    <span class="help-block" *ngIf="((gatewayTemplateIOTagForm.get('dataTypeId').touched ||
                                       gatewayTemplateIOTagForm.get('dataTypeId').dirty) &&
                                        gatewayTemplateIOTagForm.get('dataTypeId').errors)">
                      <span i18n="Message|Please Select Data Type@@dataType.message"
                        *ngIf="gatewayTemplateIOTagForm.get('dataTypeId').errors.required">
                        Please Select Data Type
                      </span>
                    </span>
                  </div>
                </div>
              </div>
            </div>
            <div class=" m-form__group row">
              <div class="col-lg-6">
                <label i18n="Mapping with Standard I/O Tag|Mapping with Standard I/O Tag@@mappingwithStandardI/OTag" class="">Mapping with Standard I/O Tag</label>
                <div class="form-group">
                  <ejs-dropdownlist id='ddlelement' #ddlelement class="form-control p-0" [value]='dataProtocolStandardTagId'
                      name="dataProtocolStandardTagId" formControlName="dataProtocolStandardTagId" [dataSource]='standardIOTags'
                      [placeholder]='standardIOTagWaterMark' [fields]='standardIOTagFields' [popupHeight]='height'
                      [sortOrder]="sortDropDown" (filtering)='onFilteringStandardIOTag($event)'
                      [filterBarPlaceholder]="filterPlaceholder" [allowFiltering]='true'
                      (change)='standardIOTagOnChange($event)' [locale]='locale'></ejs-dropdownlist>
                  <!-- <select id="dataProtocolStandardTagId" formControlName="dataProtocolStandardTagId"
                    class="form-control m-input">
                    <option i18n="Option|Select@@select" [ngValue]=null>--Select--</option>
                    <option *ngFor="let standardIOTag of standardIOTags" [ngValue]="standardIOTag.id">
                      {{standardIOTag.name}}
                    </option>
                  </select> -->
                </div>
              </div>
              <div class="col-lg-6">
                <label i18n='Tag IO Mode|Tag IO Mode@@tagIOMode*' class="">Tag IO Mode<span class="text-danger"> *</span></label>
                <div class="form-group">
                  <div [ngClass]="{'has-error': ((gatewayTemplateIOTagForm.get('tagIOMode').touched ||
                                    gatewayTemplateIOTagForm.get('tagIOMode').dirty) &&
                                    gatewayTemplateIOTagForm.get('tagIOMode').errors)}">
                    <select id="tagIOMode" formControlName="tagIOMode" class="form-control m-input">
                      <option i18n="Option|Select@@select" [ngValue]=null>--Select--</option>
                      <option *ngFor="let tagIOMode of tagIOModes| orderByAlphabetical:'value'" [ngValue]="tagIOMode.id">
                        {{tagIOMode.value}}
                      </option>
                    </select>
                    <span class="help-block" *ngIf="((gatewayTemplateIOTagForm.get('tagIOMode').touched ||
                                        gatewayTemplateIOTagForm.get('tagIOMode').dirty) &&
                                        gatewayTemplateIOTagForm.get('tagIOMode').errors)">
                      <span i18n="Message|Please Select Tag IO Mode@@tagIOMode.message" *ngIf="gatewayTemplateIOTagForm.get('tagIOMode').errors.required">
                        Please Select Tag IO Mode
                      </span>
                    </span>
                  </div>
                </div>
              </div>
            </div>
            <div class="m-form__group row">
              <div class="col-lg-6 col-md-6">
                <label i18n="Engineering Unit|Engineering Unit@@engineeringUnit" class="">Engineering Unit</label>
                <div class="form-group">
                  <div>
                    <ejs-dropdownlist id='ddlelement' #ddlelement class="form-control p-0" [value]='engUnitId'
                      name="engUnitId" formControlName="engUnitId" [dataSource]='engUnits'
                      [placeholder]='engUnitWaterMark' [fields]='engUnitFields' [popupHeight]='height'
                      [sortOrder]="sortDropDown" (filtering)='onFilteringEngUnit($event)'
                      [filterBarPlaceholder]="filterPlaceholder" [allowFiltering]='true'
                      (change)='engUnitOnChange($event)' [locale]='locale'></ejs-dropdownlist>
                    <!-- <select  formControlName="engUnitId" class="form-control m-input">
                      <option i18n="Option|Select@@select" [ngValue]=null>--Select--</option>
                      <option [ngValue]="unit.id" *ngFor="let unit of engUnits">{{unit.name}}</option>
                    </select> -->
                  </div>
                </div>
              </div>
              <div class="col-lg-6 col-md-6">
              </div>
            </div>
            <div class=" m-form__group row">
               <div class="col-lg-6">
                <label i18n="Status|Status@@status">Status</label>
                <div class="form-group">
                  <mat-radio-group formControlName="status">
                      <mat-radio-button value="Active" i18n="Radio button|Active@@active" style="margin-right: 20px;" id="gatewatTemplateIOTagStatusA">
                        Active
                      </mat-radio-button>
                      <mat-radio-button id="gatewatTemplateIOTagStatusI" value="In_Active" i18n="Radio button|InActive@@inActive">In-Active
                      </mat-radio-button>
                    </mat-radio-group>
                </div>
              </div>
              <div class="col-lg-6">
              </div>
            </div>
          </div>
        </div>
        <div class="path finalLine"></div>
        <div class="row" style="text-align: right;padding: 23px 0;">
          <div class="col-md-12">
            <a>
              <button type="button" id="cancelProtocol" class="btn btn-default text-center cancelActionButton" i18n="Cancel button|Cancel@@cancel"
                (click)="cancelGatewayTemplateIOTagForm($event)">Cancel</button>
            </a>&nbsp;
            <button type="button" i18n="Reset button|Reset@@reset" class="btn btn-secondary text-center resetActionButton"
              [disabled]="!gatewayTemplateIOTagForm.dirty && gatewayTemplateIOTagForm.pristine || !gatewayTemplateIOTagForm.dirty && !gatewayTemplateIOTagForm.pristine"
              (click)="resetIOTagForm()">Reset</button>&nbsp;

            <span i18n-matTooltip="Tooltip validation|Fill the mandatory fields@@fillTheMandatoryFields" matTooltip="Fill the mandatory fields" [matTooltipDisabled]="gatewayTemplateIOTagForm.valid">
              <button i18n="Review&Save button|Review&Save@@review&Save" class="btn btn-primary text-center reviewAndSaveActionButton" type="submit"
                [disabled]="!gatewayTemplateIOTagForm.valid">
                Review & Save</button>
            </span>
          </div>
        </div>
      </form>

      <div *ngIf="IOTagReadModeView" class="formReadMode">
        <div class="form-group-custom1">
          <legend i18n="Header|Gateway Template IO Tag@@gatewayTemplateIOTag" class="m-b-15">Gateway Template IO Tag</legend>
          <div class="form-row">
            <!-- <a (click)="backButton('gatewayTemplateIOTagDetail')" class="edit_section">
              <img src="/assets/img/action/edit.png" alt="edit protocol detail"
              i18n-matTooltip="@@ClicktoeditParamGroupDetail"  matTooltip="Click to edit Param Group Detail">
            </a> -->
            <div class="form-group col-sm-6 col-md-6">
              <label i18n="Name|Name@@name" class="">Name</label>
              <p>
                {{gatewayTemplateIOTag.name}}
              </p>
            </div>
            <div class="form-group col-sm-6 col-md-6">
              <label i18n="Description|Description@@description" class="">Description</label>
              <p>
                {{gatewayTemplateIOTag.description | hyphen}}
              </p>
            </div>
            <div class="form-group col-sm-6 col-md-6">
              <label i18n="Tag Key Name|Tag Key Name@@tagKeyName" class="">Tag Key Name</label>
              <p>
                {{gatewayTemplateIOTag.tagKeyName | hyphen}}
              </p>
            </div>
            <div class="form-group col-sm-6 col-md-6">
              <label i18n="Tag Type|Tag Type@@tagType" class="">Tag Type</label>
                <p *ngFor="let tagType of tagTypes">
                  <span *ngIf="tagType.id===parseInt(gatewayTemplateIOTag.tagType)">
                    {{tagType.value}}
                  </span>
                </p>
            </div>
            <div class="form-group col-sm-6 col-md-6">
              <label i18n="Data Type|Data Type@@dataType" class="">Data Type</label>
                <p *ngFor="let dataType of dataTypes">
                  <span *ngIf="dataType.id===parseInt(gatewayTemplateIOTag.dataTypeId)">
                    {{dataType.name}}
                  </span>
                </p>
            </div>
            <div class="form-group col-sm-6 col-md-6">
              <label i18n="Mapping with Standard I/O Tag|Mapping with Standard I/O Tag@@mappingwithStandardI/OTag" class="">Mapping with Standard I/O Tag</label>
              <p *ngIf="(gatewayTemplateIOTag.dataProtocolStandardTagId==='0') else noBlock">
                {{gatewayTemplateIOTag.dataProtocolStandardTagId | hyphen}}
              </p>
              <ng-template #noBlock>
                <p *ngFor="let stdIOTag of standardIOTags">
                  <span *ngIf="stdIOTag.id===parseInt(gatewayTemplateIOTag.dataProtocolStandardTagId)">
                    {{stdIOTag.name}}
                  </span>
                </p>
              </ng-template>
            </div>
            <div class="form-group col-sm-6 col-md-6">
                <label i18n="Tag IO Mode|Tag IO Mode@@tagIOMode" class="">Tag IO Mode</label>
                <p *ngFor="let tagIOMode of tagIOModes">
                  <span *ngIf="tagIOMode.id===parseInt(gatewayTemplateIOTag.tagIOMode)">
                    {{tagIOMode.value}}
                  </span>
                </p>
              </div>
              <div class="form-group col-sm-6 col-md-6">
                <label i18n="Engineering Unit|Engineering Unit@@engineeringUnit" class="">Engineering Unit</label>
                <ng-container *ngIf="(gatewayTemplateIOTag.engUnitId==='0');else nullBlock">
                <p>
                  {{gatewayTemplateIOTag.engUnitId | hyphen}}
                </p>
              </ng-container>
              <ng-template #nullBlock>
                  <ng-container *ngIf="gatewayTemplateIOTag.engUnitId===null;else dataBlock">
                    <p>
                      {{gatewayTemplateIOTag.engUnitId | hyphen}}
                    </p>
                  </ng-container>
              </ng-template>
              <ng-template #dataBlock>
                <p *ngFor="let engUnit of engUnits">
                  <span *ngIf="engUnit.id===parseInt(gatewayTemplateIOTag.engUnitId)">
                    {{engUnit.name}}
                  </span>
                </p>
              </ng-template> 
              </div>
            <div class="form-group col-sm-6 col-md-6">
                <label i18n="Status|Status@@status" class="">Status</label>
                <p *ngIf="gatewayTemplateIOTag.status === 'In_Active'; else activeBlock">
                  In-Active
                </p>
                <ng-template #activeBlock>
                  <p>
                    Active
                  </p>
                </ng-template>
            </div>
          </div>
        </div>
        <div class="path finalLine"></div>
        <div class="row" style="    text-align: right;padding: 23px 0;">
          <div class="col-md-12">
            <button type="button" class="btn btn-default text-center backActionButton" (click)="backButton($event)" i18n="Back button|Back@@back"> Back
            </button>
            &nbsp;
            <button i18n="Save button|Save@@save" class="btn btn-primary text-center saveActionButton" type="submit"
              (click)="createOrUpdateGatewayTemplateIOTag()">
              Save</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Loader image -->
<div *ngIf="showLoaderImage" class="col-lg-12 loaderImageStyle" style="margin-left:0%; margin-top:0%;margin-bottom:0%;" align="center">
  <img src="/assets/img/dashboard/ProgressLoader.gif" height="auto" width="50%" alt="Loading........">
</div>
<!-- Global modal notification component selector for cancel and final save form-->
<app-modal-notification  (modelNotificationWarning)="formResetConfirm()" (modelNotificationSuccess)="redirectTo()"></app-modal-notification >