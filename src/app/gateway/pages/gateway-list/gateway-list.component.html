<div class="col-md-12 padding_0px">

    <div class="panel includeFilterPanel mb-0" [ngClass]="[ (this.expand) ? 'panel-expand': '']">
      <div class="row margin_0px rowBox" *ngIf="toggleFilterSearch">
        <div class="col-md-12 padding_0px">
          <div class="padding_Form">
            <form [formGroup]="gatewayFilterForm">
              <div class="form-group-custom1">
    
                <div class="m-form__group row">
    
                  <div class="col-lg-4">
                    <label i18n="Name|Name@@name">Name</label>
                    <div class="form-group">
                      <input type="text" class="form-control" placeholder="Enter Gateway Name" formControlName="names">
                    </div>
                  </div>
    
                  <div class="col-lg-4">
                    <label i18n="Node Identifier|Node Identifier@@nodeIdentifier">Node Identifier</label>
                    <div class="form-group">
                      <input type="text" class="form-control" placeholder="Enter Node Identifier" formControlName="nodeIdentifier">
                    </div>
                  </div>
    
                  <div class="col-lg-4">
                    <label i18n="AuthToken|AuthToken@@authToken">AuthToken</label>
                    <div class="form-group">
                      <input type="text" class="form-control" placeholder="Enter AuthToken" formControlName="authToken">
                    </div>
                  </div>
                </div>
    
                <div class="m-form__group row">
                  <div class="col-lg-4">
                    <label i18n="Gateway Type|Gateway Type@@gatewayType">Gateway Type</label>
                    <div class="form-group">
                      <div>
                        <ejs-dropdownlist id='ddlelement' #ddlelement class="form-control p-0" [value]='gatewayTypeId'
                          name="gatewayTypeId"  [dataSource]='gatewayTypeList' formControlName="gatewayTypeId"
                          [placeholder]='gatewayTypeWaterMark' [fields]='gatewayTypeFields' [popupHeight]='height'
                          [sortOrder]="sortDropDown" (filtering)='onFilteringGatewayType($event)'
                          [filterBarPlaceholder]="filterPlaceholder" [allowFiltering]='true'
                          (change)='gatewayTypeChange($event)' [locale]='locale'></ejs-dropdownlist>
                      </div>
                    </div>
                  </div>
    
                  <div class="col-lg-4">
                    <label i18n="Gateway Template|Gateway Template@@gatewayTemplate">Gateway Template</label>
                    <div class="form-group">
                      <div>
                        <ejs-dropdownlist id='ddlelement' #ddlelement class="form-control p-0" [value]='nodeTemplateId'
                            name="nodeTemplateId" [dataSource]='gatewayTemplates' formControlName="nodeTemplateId"
                            [placeholder]='gatewayTemplateWaterMark' [fields]='gatewayTemplateFields' [popupHeight]='height'
                            [sortOrder]="sortDropDown" (filtering)='onFilteringGatewayTemplates($event)'
                            [filterBarPlaceholder]="filterPlaceholder" [allowFiltering]='true'
                            (change)='nodeTemplateChange($event)' [locale]='locale'></ejs-dropdownlist>    
                      </div>
                    </div>
                  </div>
                </div>
                <div class="path finalLine"></div>
                <div class="row">
                  <div class="col-md-12">
                    <button type="button" class="btn btn-secondary text-center" (click)="resetForm()" [disabled]="!enableViewButton" i18n="@@">
                    Clear Filter
                    </button>
                    &nbsp;
                    <button i18n="View button|View@@view" class="btn btn-primary text-center" (click)="filterForm()" type="submit">
                    View</button>
                  </div>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    
    <!--  Gateway List view starts here -->
    <div class="container mat-elevation-z8 panel panel-inverse mb-0" style="position: relative">
      <app-panel-user i18n-name="Panel header|List of Gateways@@listOfGateways" name="List of Gateways" #panelHeader
        (refreshTableList)="refreshTableListFunction();panelHeader.setTableDasourceAsDefault(this.dataSource)"
        (scrollBarDirective)="onPaginateViewScrollToTop()">
    
        <!-- Download files as Excel, PDF, CSV -->
        <span downloadButton class="ml-2 d-inline-block" *ngIf="dataSource && dataSource.data.length">
          <app-export-files-to (exportedTo)="downloadFile($event)"></app-export-files-to>
        </span>
    
        <!-- Input field for search -->
        <input searchfield style="display: none;" id="filter" class="form-control m-input ml-2"
          (keyup)="panelHeader.applyFilter($event.target.value, dataSource)"
          i18n-placeholder="Search|Search placeholder@@search" matInput placeholder="Search.." />
    
        <!-- Search button -->
        <a searchButton href="javascript:;" i18n-matTooltip="Search button|Click to Search@@ClickToSearch"
          matTooltip="Click to Search" class="btn btn-xs btn-icon btn-circle btn-default"
          (click)="panelHeader.searchButton(this.dataSource)">
          <i class="fa fa-search"></i>
        </a>
        <!-- Add New button -->
        <a addNewButton [routerLink]="['../gateway/gateway-form']"
          i18n-matTooltip="AddNew button tooltip|Click to Add New@@addNew" matTooltip="Click to Add New"
          class="btn btn-xs btn-icon btn-circle btn-warning">
          <i class="fa fa-plus"></i>
        </a>
        <!--Download button-->
        <a addNewButton [routerLink]="['../gateway/download-template']" matTooltip="Click to Download"
          class="btn btn-xs btn-icon btn-circle btn-info">
          <i class="fa fa-download"></i>
        </a>
        <!--upload button-->
        <a addNewButton [routerLink]="['../gateway/upload-template']" matTooltip="Click to Upload"
          class="btn btn-xs btn-icon btn-circle btn-secondary">
          <i class="fa fa-upload"></i>
        </a>
    
        <!-- filter button -->
        <a filterButton href="javascript:;" matTooltip="{{filterExpandCollapse}}"
          class="btn btn-xs btn-icon btn-circle btn-warning searchFilter" (click)="filterSearchBox()">
          <i class="fas fa-lg fa-fw fa-angle-down text-light" *ngIf="toggleFilterSearch"></i>
          <i class="fas fa-lg fa-fw fa-angle-up text-light" *ngIf="!toggleFilterSearch"></i>
        </a>
    
        <div class="position-relative">
          <div class="ps position-relative"
            [ngClass]="{'firstLeveltabTable':this.dataSource.filteredData.length!=0}" appScrollbarDirective
            *ngIf="dataSource && dataSource.data.length">
            <ng-container *ngTemplateOutlet="matTable"></ng-container>
          </div>
    
          <div class="table-responsive" *ngIf="!dataSource || !dataSource.data.length">
            <ng-container *ngTemplateOutlet="matTable"></ng-container>
          </div>
          <!-- Loader image  -->
          <div *ngIf="showLoaderImage" class="col-lg-12" style="margin-left:0%; margin-top:0%;margin-bottom:0%;"
            align="center">
            <img src="/assets/img/dashboard/ProgressLoader.gif" height="auto" width="50%" alt="Loading........">
          </div>
          <h3 i18n="No records found text|No records found@@noRecordsFound"
            *ngIf="((dataSource && !dataSource.filteredData.length) || (dataSource && !dataSource.data.length)) && !showLoaderImage"
            class="text-center noRecordsFound">
            No records found!
          </h3>
          <app-mat-table-paginator [dataSource]="this.dataSource" [totalNoOfRecords]="this.totalNoOfRecords"
            #myPaginatorChildComponent (paginator)="matTablePaginator($event)"
            (scrollBarDirective)="onPaginateViewScrollToTop()">
          </app-mat-table-paginator>
        </div>
        <ng-template #matTable>
          <table mat-table [dataSource]="dataSource" class="table table-striped table-bordered" matSort>
            
            <ng-container matColumnDef="id">
              <th i18n="Table id|Sno@@sNo" mat-header-cell *matHeaderCellDef>S.No.</th>
              <td mat-cell *matCellDef="let element; let i = index;">
                {{ (i+1) + (myPaginator.pageIndex * myPaginator.pageSize) }}</td>
    
            </ng-container>
            <ng-container matColumnDef="name">
              <th i18n="Table|Name@@name" mat-header-cell *matHeaderCellDef mat-sort-header>Name</th>
              <td mat-cell *matCellDef="let element"> {{element.name}} </td>
            </ng-container>
    
            <ng-container matColumnDef="authToken">
              <th i18n="Table|Auth Token@@authToken" mat-header-cell *matHeaderCellDef mat-sort-header>Auth Token</th>
              <td mat-cell *matCellDef="let element"> {{element.authToken}} </td>
            </ng-container>
            <ng-container matColumnDef="gatewayTypeName">
              <th i18n="Table|Type@@type" mat-header-cell *matHeaderCellDef mat-sort-header> Type </th>
              <td mat-cell *matCellDef="let element"> {{element.gatewayTypeName}} </td>
            </ng-container>
    
            <ng-container matColumnDef="gatewayModelName">
              <th i18n="Table|Model@@model" mat-header-cell *matHeaderCellDef mat-sort-header> Model </th>
              <td mat-cell *matCellDef="let element"> {{element.gatewayModelName}} </td>
            </ng-container>
    
            <ng-container matColumnDef="gatewayTemplateName">
              <th i18n="Table|Template@@template" mat-header-cell *matHeaderCellDef mat-sort-header> Template </th>
              <td mat-cell *matCellDef="let element"> {{element.gatewayTemplateName}} </td>
            </ng-container>
            <ng-container matColumnDef="nodeIdentifier">
              <th i18n="Table|node identifier@@nodeIdentifier" mat-header-cell *matHeaderCellDef mat-sort-header>Node
                Identifier</th>
              <td mat-cell *matCellDef="let element"> {{element.nodeIdentifier}} </td>
            </ng-container>
            <ng-container matColumnDef="action">
              <th i18n="Table|Action@@action" mat-header-cell *matHeaderCellDef> Action </th>
              <td mat-cell *matCellDef="let element">
    
                <a class="" [routerLink]="['../gateway/gateway-view']" (click)="clickToView(element)">
                  <i class="fas fa-md fa-fw m-r-10 fa-eye" alt="view"
                    i18n-matTooltip="View button|Click to View tooltip@@clickToView" matTooltip="Click to View"></i>
                </a>
    
                <a class="" [routerLink]="['../gateway/gateway-form']" (click)="updateGateway(element)">
                  <i class="fas fa-md fa-fw m-r-10 fa-edit" alt="edit"
                    i18n-matTooltip="Edit button|Click to Edit tooltip@@clickToEdit" matTooltip="Click to Edit"></i>
                </a>
                <a class="" (click)="manageIOTags(element);">
                  <i class="fas fa-md fa-fw m-r-10 fa-share-square" alt="View IO Tags"
                    i18n-matTooltip="IO Tag button|Click to Manage IO Tags@@clickToManageIOTags"
                    matTooltip="Click to Manage IO Tags"></i>
    
                </a>
                <a (click)="manageCommunication(element)">
                  <i class="fas fa-md fa-fw m-r-10 fa-share-square" alt="Manage Communication"
                    i18n-matTooltip="Manage Communication Protocol button|Click to Manage Communication Protocol@@clickToManageCommunicationProtocol"
                    matTooltip="Click to Manage Communication Protocol"></i>
                </a>
    
                <a class="" (click)="deleteGateway(element.id)">
                  <i class="fas fa-md fa-fw m-r-10 fa-trash-alt" alt="delete"
                    i18n-matTooltip="Delete button|Click to Delete tooltip@@clickToDelete" matTooltip="Click to Delete"></i>
                </a>
              </td>
            </ng-container>
    
            <tr mat-header-row *matHeaderRowDef="displayedColumns;sticky: true"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
          </table>
        </ng-template>
      </app-panel-user>
    
    
    
    </div>
    </div>
    </div>
    <!--  Gateway List view ends here -->
    
    
<!-- Loader image -->
<div *ngIf="showLoaderImageOnDelete" class="col-lg-12 loaderImageStyle" style="margin-left:0%; margin-top:0%;margin-bottom:0%;"
  align="center">
  <img src="/assets/img/dashboard/ProgressLoader.gif" height="auto" width="50%" alt="Loading........">
</div>


    <!-- Global modal notification component selector  for deletion and after deletetion success, success with failed-->
    <app-modal-notification (modelNotificationDanger)="confirmDelete();"
      (modelNotificationSuccess)="refreshTableListFunction()"></app-modal-notification>