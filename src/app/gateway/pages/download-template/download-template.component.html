<div class="row">
  <div class="col-md-12">
    <h1  i18n="Header|Download Template@@downloadTemplate" class="page-header">
      Download Excel-Template
    </h1>
  </div>
</div>

<div class="row margin_0px rowBox">
  <div class="col-md-12 padding_0px">
    <div class="padding_Form">
      <form [formGroup]="downloadTemplate">
        <div class="form-group-custom1">
          <div class="m-form__group row">
            <div class="col-lg-6">
              <label i18n="Gateway Type|Gateway Type@@gatewayType*">Gateway Type<span
                  class="text-danger">*</span></label>
              <div class="form-group">
                <div [ngClass]="{'has-error': ((downloadTemplate.get('gatewayTypeId').touched ||
                              downloadTemplate.get('gatewayTypeId').dirty) &&
                              downloadTemplate.get('gatewayTypeId').errors)}">
                              <ejs-dropdownlist id='ddlelement' #ddlelement class="form-control p-0" [value]='gatewayTypeId'
                              name="gatewayTypeId" formControlName="gatewayTypeId" [dataSource]='gatewayTypeList'
                              [placeholder]='gatewayTypeWaterMark' [fields]='gatewayTypeFields' [popupHeight]='height'
                              [sortOrder]="sortDropDown" (filtering)='onFilteringGatewayType($event)'
                              [filterBarPlaceholder]="filterPlaceholder" [allowFiltering]='true'
                              (change)='gatewayTypeChange($event)' [locale]='locale'></ejs-dropdownlist>       
                  <!-- <select (change)="gatewayTypeChange($event)" formControlName="gatewayTypeId"
                    class="form-control m-input" required>
                    <option i18n="Option|Select@@select" [ngValue]="null">--Select--</option>
                    <option *ngFor="let gatewayTypeObj of gatewayTypeList" [value]="gatewayTypeObj.id">
                      {{gatewayTypeObj.name}}</option>
                  </select> -->
                  <span class="help-block" *ngIf="((downloadTemplate.get('gatewayTypeId').touched ||
                                downloadTemplate.get('gatewayTypeId').dirty) &&
                                downloadTemplate.get('gatewayTypeId').errors)">
                    <span i18n="Message|Please Select Gateway Type@@gatewayType.message"
                      *ngIf="downloadTemplate.get('gatewayTypeId').errors.required">
                      Please Select Gateway Type
                    </span>
                  </span>
                </div>
              </div>
            </div>
            <div class="col-lg-6">
              <label i18n="Gateway Model|Gateway Model@@gatewayModel">Gateway Model</label>
              <div class="form-group">
                <div>
                  <ejs-dropdownlist id='ddlelement' #ddlelement class="form-control p-0" [value]='gatewayModelId'
            name="gatewayModelId" formControlName="gatewayModelId" [dataSource]='gatewayModelList'
            [placeholder]='gatewayModelWaterMark' [fields]='gatewayModelFields' [popupHeight]='height'
            [sortOrder]="sortDropDown" (filtering)='onFilteringGatewayModel($event)'
            [filterBarPlaceholder]="filterPlaceholder" [allowFiltering]='true'
            (change)='gatewayModelChange($event)' [locale]='locale'></ejs-dropdownlist>
                  <!-- <select (change)="gatewayModelChange($event)" formControlName="gatewayModelId"
                    class="form-control m-input">
                    <option i18n="Option|Select@@select" [value]="null">--Select--</option>
                    <option *ngFor="let gatewayModelObj of gatewayModelList" [value]="gatewayModelObj.id">
                      {{gatewayModelObj.name}}</option>
                  </select> -->
                </div>
              </div>
            </div>
          </div>
          <div class="m-form__group row">

            <div class="col-lg-6">
              <label i18n="Gateway Template|Gateway Template@@gatewayTemplate*">Gateway Template<span
                  class="text-danger">*</span></label>
              <div class="form-group">
                <div [ngClass]="{'has-error': ((downloadTemplate.get('gatewayTemplateId').touched ||
                              downloadTemplate.get('gatewayTemplateId').dirty) &&
                              downloadTemplate.get('gatewayTemplateId').errors)}">
                              <ejs-dropdownlist id='ddlelement' #ddlelement class="form-control p-0" [value]='gatewayTemplateId'
                              name="gatewayTemplateId" formControlName="gatewayTemplateId" [dataSource]='gatewayTemplates'
                              [placeholder]='gatewayTemplateWaterMark' [fields]='gatewayTemplateFields' [popupHeight]='height'
                              [sortOrder]="sortDropDown" (filtering)='onFilteringGatewayTemplates($event)'
                              [filterBarPlaceholder]="filterPlaceholder" [allowFiltering]='true'
                              (change)='nodeTemplateChange($event)' [locale]='locale'></ejs-dropdownlist>             
                  <!-- <select (change)="nodeTemplateChange($event)" formControlName="gatewayTemplateId"
                    class="form-control m-input" required>
                    <option i18n="Option|Select@@select" [ngValue]="null">--Select--</option>
                    <option *ngFor="let nodeTemplateObj of gatewayTemplates" [value]="nodeTemplateObj.id">
                      {{nodeTemplateObj.name}}</option>
                  </select> -->
                  <span class="help-block" *ngIf="((downloadTemplate.get('gatewayTemplateId').touched ||
                                downloadTemplate.get('gatewayTemplateId').dirty) &&
                                downloadTemplate.get('gatewayTemplateId').errors)">
                    <span i18n="Message|Please select Gateway Template@@gatewayTemplate.message"
                      *ngIf="downloadTemplate.get('gatewayTemplateId').errors.required">
                      Please Select Gateway Template
                    </span>
                  </span>
                </div>
              </div>
            </div>
            <div class="col-lg-6">
              <label i18n="Asset Template|Asset Template@@assetTemplate*">Asset Template<span
                  class="text-danger">*</span></label>
              <div class="form-group">
                <div [ngClass]="{'has-error': ((downloadTemplate.get('assetTemplateId').touched ||
                              downloadTemplate.get('assetTemplateId').dirty) &&
                              downloadTemplate.get('assetTemplateId').errors)}">
                              <ejs-dropdownlist id='ddlelement' #ddlelement class="form-control p-0" [value]='assetTemplateId'
                              name="assetTemplateId" formControlName="assetTemplateId" [dataSource]='assetTemplateList'
                              [placeholder]='assetTemplateWaterMark' [fields]='assetTemplateFields' [popupHeight]='height'
                              [sortOrder]="sortDropDown" (filtering)='onFilteringAssetTemplate($event)'
                              [filterBarPlaceholder]="filterPlaceholder" [allowFiltering]='true'
                              (change)='assetTemplateChange($event)' [locale]='locale'></ejs-dropdownlist>            
                  <!-- <select (change)="assetTemplateChange($event)" formControlName="assetTemplateId"
                    class="form-control m-input" required>
                    <option i18n="Option|Select@@select" [ngValue]="null">--Select--</option>
                    <option *ngFor="let assetTemplateObj of assetTemplateList" [ngValue]="assetTemplateObj.id">
                      {{assetTemplateObj.name}}</option>
                  </select> -->
                  <span class="help-block" *ngIf="((downloadTemplate.get('assetTemplateId').touched ||
                                downloadTemplate.get('assetTemplateId').dirty) &&
                                downloadTemplate.get('assetTemplateId').errors)">
                    <span i18n="Message|Please Select Asset Template@@gatewayTemplate.message"
                      *ngIf="downloadTemplate.get('assetTemplateId').errors.required">
                      Please Select Asset Template
                    </span>
                  </span>
                </div>
              </div>
            </div>

          </div>
        </div>

      </form>
      <div class="path finalLine"></div>
      <div class="row" style="    text-align: right;padding: 23px 0;">
        <div class="col-md-12">
          <a (click)="cancelGatewayForm()">
            <button type="button" class="btn btn-default text-center cancelActionButton"
              i18n="Cancel button|Cancel@@cancel"> Cancel
            </button>
          </a>
          &nbsp;
          <button type="button" class="btn btn-secondary text-center resetActionButton"
            [disabled]="!downloadTemplate.dirty && downloadTemplate.pristine" (click)="resetgatewayForm()"
            i18n="Reset button|Reset@@reset">
            Reset
          </button>
          &nbsp;
          <span i18n-matTooltip="Tooltip validation|Fill the mandatory fields@@fillTheMandatoryFields"
            matTooltip="Fill the mandatory fields" [matTooltipDisabled]="downloadTemplate.valid">

            <button i18n="Review&Download button|Review&Downlaod@@review&Download" class="btn btn-primary text-center"
              (click)="previewGateway()" type="submit" [disabled]="!(downloadTemplate.valid)">
              Review & Download</button>
          </span>
        </div>
      </div>
    </div>
  </div>
</div>
<!--  Gateway  forms view ends here -->

<!-- Global modal notification component selector for cancel and final save form-->
<app-modal-notification (modelNotificationWarning)="alertRedirection()"></app-modal-notification>